<!Document html>
<html lang="ja">
<htad>
     <meta charset="utf-8">
     <title>D3のグラフ勉強</title>
     <style>
          .axis path, .axis line {
               fill : none;
               stroke: black;
               shape-rendering: crispEdges;
          }

          .axis text {
               font-size: 11px;
          }
     </style>
</htad>
<body>
     <script src="http://d3js.org/d3.v3.min.js" charsert="utf-8"></script>
     <script>
          var json = {
                         "data": [
                              23,33,45,2,234,32,67,21,34,54,132,2,23,21,200,34,122,54,34,
                              3,44,43,43
                         ]
                    }
          var dataset=json.data;

          var w = 1000;
          var h = 500;
          var yPadding = 20;
          var wPadding = 40;

          // svgの定義
          var svg = d3.select("body").append("svg")
               .attr({
                    width: w + wPadding, 
                    height: h + yPadding,
               });

          // X軸のスケール
          var xScale = d3.scale.linear()
               .domain([0, dataset.length])
               .range([0, w]);

          // Y軸のスケール ※y軸を下から上にしたいときはdomainと逆にrangeを指定する
          var yScale = d3.scale.linear()
               .domain([0, d3.max(dataset)])
               .range([h, 0]);

          console.log(d3.extent(dataset));

          // 横軸の定義
          var xAxis = d3.svg.axis()
                    .scale(xScale)                // scale定義
                    .orient("bottom");            // 数字を軸のどこに表示するか

          // 縦軸の定義
          var yAxis = d3.svg.axis()
                    .scale(yScale)
                    .orient("left");

          // X軸の表示
          svg.append("g")
               .attr({
                    class : "xAxis",
                    transform: "translate(" + wPadding + ",  " + (h - yPadding) + ")"
               })
               .call(xAxis);
 
          // Y軸の表示
          svg.append("g")
               .attr({
                    class : "yAxis",
                    transform: "translate(" + wPadding + ", " + -yPadding + ")"
               })
               .call(yAxis);

          // 線の定義
          var line = d3.svg.line()
            .x(function(d, i) { return i * w/dataset.length + wPadding;})
            .y(function(d) { return yScale(d) - yPadding; });     

          // SCGにグラフを表示
          svg.append("path")
               .attr({
                    d: line(dataset),   // 折れ線の場合は線の定義にdataをセットする
                    fill: "none",       // noneと指定しないと黒く塗りつぶされる
                    stroke: "blue"      // 線の色を指定しないと表示されない
               });
     </script>
</body>
</html>